---
date: 2021-01-04T15:34
---

# Breakdown methods

[[[ML]]]
[[script]]

[source](https://medium.com/responsibleml/basic-xai-with-dalex-part-4-break-down-method-2cd4de43abdd)
> The Break Down method is one of the local explanations; it indicates for a selected observation a contribution of variables into modelsâ€™ prediction.

[*See, also* text](https://ema.drwhy.ai/breakDown.html#BDMethod)

``` r
# LIME for apartment observation
library(lime)

#library
library(DALEX)
#> Welcome to DALEX (version: 2.0.1).
#> Find examples and detailed introduction at: https://pbiecek.github.io/ema/
#> 
#> Attaching package: 'DALEX'
#> The following object is masked from 'package:lime':
#> 
#>     explain

# Example for R


#apartments dataset from DALEX
#data have 5 numerical variables and 1 factor
head(apartments)
#>   m2.price construction.year surface floor no.rooms    district
#> 1     5897              1953      25     3        1 Srodmiescie
#> 2     1818              1992     143     9        5     Bielany
#> 3     3643              1937      56     1        2       Praga
#> 4     3517              1995      93     7        3      Ochota
#> 5     3013              1992     144     6        5     Mokotow
#> 6     5795              1926      61     6        2 Srodmiescie

#we use one-hot encoding for district variable - one_hot() function from mltools
data <- mltools::one_hot(data.table::data.table(apartments))

#we created a random forest model using ranger library
library(ranger)
model <- ranger(m2.price~., data = data)

#we created an explainer with DALEX package
explainer <- explain(model, data = data, y = data$m2.price)
#> Preparation of a new explainer is initiated
#>   -> model label       :  ranger  ( [33m default [39m )
#>   -> data              :  1000  rows  15  cols 
#>   -> target variable   :  1000  values 
#>   -> predict function  :  yhat.ranger  will be used ( [33m default [39m )
#>   -> predicted values  :  numerical, min =  2007.479 , mean =  3486.883 , max =  5934.951  
#>   -> model_info        :  package ranger , ver. 0.12.1 , task regression ( [33m default [39m ) 
#>   -> residual function :  difference between y and yhat ( [33m default [39m )
#>   -> residuals         :  numerical, min =  -509.2709 , mean =  0.1360433 , max =  723.2919  
#>  [32m A new explainer has been created! [39m

rf_pparts = predict_parts(explainer = explainer, new_observation = data, type = "break_down")

# plot Break Down
plot(rf_pparts)
```

![](https://i.imgur.com/A4zuQam.png)

