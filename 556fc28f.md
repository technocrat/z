---
date: 2022-06-30T16:36
---

# Multi-column tables	

[[markup]]

Gotta be a better way
```
library(dplyr)
library(gt)
library(scales)

hp_table <- function(x){
    gt(x) %>% 
        data_color(columns="hp", 
                   colors=col_numeric(palette="Blues", c(0, 400))) %>% 
        tab_options(column_labels.hidden = TRUE) %>% 
        as_raw_html()
}

mtcars %>% 
    mutate(good_mpg = ifelse(mpg > 20, "Good mileage", "Bad mileage"), 
           car_name = row.names(.))  %>% 
    arrange(hp) %>% 
    group_by(relevel(factor(good_mpg), "Good mileage")) %>% 
    slice_head(n=5) %>% 
    select(car_name, hp) %>%
    group_map(~ hp_table(.x)) %>% 
    data.frame(.) %>% 
    setNames(., c("High mileage", "Low mileage")) %>% 
    gt() %>% 
    fmt_markdown(columns = TRUE)
 ```
